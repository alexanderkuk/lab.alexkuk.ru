Полуавтоматическая классификация сайтов

Рассмотрим такую задачу: есть 1000 новостных сайтов, например: <a href="http://engadget.com">engadget.com</a>, <a href="http://huffingtonpost.com">huffingtonpost.com</a>, <a href="http://sbnation.com">sbnation.com</a>. Их нужно распределить по классам про игры, про бизнес и финансы, про IT, про кино и музыку, например. Как это сделать? Можно просто брать один сайт за другим и назначать ему класс, но чтобы обработать таким образом 1000 сайтов нужно иметь крепкую психику и уйму времени. Можно сделать более технично: взять граф похожих сайтов, выделить интересующий подграф на 1000 вершин и кластеризовать его. Про граф похожих сайтов <a href="http://habrahabr.ru/post/264627/">было написано несколько месяцев назад мной</a> и <a href="http://habrahabr.ru/company/dca/blog/265077/">ребятами из DCA</a>. Граф про новостные сайты будет выглядеть примерно так:

<img src="https://habrastorage.org/files/0cd/7ee/415/0cd7ee415cc24b61af8a33e8e0f4a005"/>

Действительно, некоторые классы получается выделить автоматически, например "игры" и "технологии":

<img src="https://habrastorage.org/files/f7f/cab/6e2/f7fcab6e22fe4068adbe130e853b9df2"/>
<cut text="А некоторые выделить не получается" />
Но, например, сайты про военное дело, космос и науку почему-то объединились в один кластер. В этом можно даже найти какой-то смысл, но заказчик его скорее всего не поймёт и будет прав.

<img src="https://habrastorage.org/files/fd2/4c5/ac9/fd24c5ac96484852867225d47951b66d"/>

Напрашивается некоторый гибридный метод, в котором классификация происходит не совсем автоматически, но и не полностью вручную. Я нашёл для себя такой метод. Успешно его использовал несколько раз и сейчас хочу им поделиться. Идея такая: классифицируем вручную несколько десятков топовых сайтов, затем для каждого последующего угадываем класс на основе уже классифицированных, проверяем результат вручную. Интерфейс на основе виджетов Jupyter может выглядеть так:

<img src="https://habrastorage.org/files/aa5/511/6ad/aa55116ad1364263a5a486d46da49b79.gif"/>

Как угадывать класс сайта? Смотрим на вершины, с которыми у сайта есть связь, оставляем те, для которых проставлен класс, считаем какой класс встречается чаще всего, вуаля, искомый класс найден. Самое замечательное свойство этого алгоритма такое: чем больше сайтов классифицировано, то лучше он угадывает классы для новых. Через какое-то время процесс будет выглядеть примерно так:

<img src="https://habrastorage.org/files/25c/b59/bdf/25cb59bdfe6345bcaa7a7f6e817254c4.gif"/>

60-70% сайтов можно будет пропускать, класс для них будет указан правильно. Это значительно ускоряет процесс классификации. Как показывает практика обработать 1000 сайтов получается за один день.

В конце можно раскрасить вершины графа в соответствии с ручной разметкой, убедиться, что военные и научные сайты разделяются правильно.

<img src="https://habrastorage.org/files/96f/75d/c4d/96f75dc4d5e74f388c371625a44d42d5"/>
