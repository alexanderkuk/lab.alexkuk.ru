Анализ звонков в колл-центры

Для проверки технологии я записал несколько обращений в разные колл-центры. Дальше они будут фигурировать под кодовыми названиями: water, mosenergo, rigla, transaero и worldclass.
<video>https://youtu.be/90aYrOU1zTQ</video>

<cut text="Первым делом нужно разбить запись на реплики..." />Первым делом нужно разбить запись на реплики. Как оказалось, этот процесс называется <a href="https://ru.wikipedia.org/wiki/Диаризация">диаризацией</a>. Есть несколько готовых инструментов: <a href="http://lium3.univ-lemans.fr/diarization/doku.php/overview">LIUM</a>, <a href="http://alize.univ-avignon.fr/">ALIZE</a>, <a href="https://www.idiap.ch/scientific-research/resources/speaker-diarization-toolkit?set_language=fr">SDT</a>. Я выбрал LIUM, потому что он выглядел солиднее остальных. Написал <a href="https://github.com/alexanderkuk/analyze-callcenter/blob/0af2f687326a09ea2b7c86159cb9db0e96d75ada/main.py#L175">небольшую обёртку</a> и разметил свои треки. Качество получилось нормальное, на картинке показана разметка для water:
<ul>
<li>Зелёным отмечена эталонная разметка, синим — автоматическая, красным — ошибки.</li>
<li>SO — это оператор, S1 — я. Видно, что короткие ответы S1 часто подклеиваются к S0. Это не очень страшно, обычно там ничего содержательного нет, только фразы вида: "да", "верно", "нет", "хорошо".</li>
<li>Более или менее корректно выделяются паузы в разговоре.</li>
</ul><img src="https://habrastorage.org/files/647/01a/45f/64701a45f29b41c5b50117d5bd1dcfc0"/>
<spoiler title="mosenergo, rigla, transaero и worldclass.">
mosenergo
<img src="https://habrastorage.org/files/24e/82e/24f/24e82e24f57247fc8cb8a5b10fb40c73"/>
rigla
<img src="https://habrastorage.org/files/158/0ea/379/1580ea37918b4c10952d1dc44fdf6270"/>
transaero
<img src="https://habrastorage.org/files/485/2c1/de2/4852c1de29534917831a517a11e43492"/>
worldclass
<img src="https://habrastorage.org/files/c56/b37/9d6/c56b379d63e44d2d922199dba91783fd"/>
</spoiler>
Для расшифровки реплик <a href="https://github.com/alexanderkuk/analyze-callcenter/blob/0af2f687326a09ea2b7c86159cb9db0e96d75ada/main.py#L374">я использовал</a> <a href="https://tech.yandex.ru/speechkit/cloud/">яндексовый SpeechKit</a>. Чтобы оценить ошибку работы их API, я сначала скормил туда реплики, полученные по эталонной ручной разметке. Ошибки значительные, но жить можно. На картинке показана расшифровка для water:
<ul>
<li>Слева текст, который пришёл от API, справа — то, что на самом деле было в записи. Всё что не попало в пересечение подчёркнуто красным.</li>
<li>Ошибки слева — это слова, которых в записи на самом деле не было. Мне кажется, они нестрашные потому что часто совсем выбиваются из контекста разговора: "даже смерть", "лопаточные кольца", "до скольких женщин", "ленина седого", "вечер вашей страны", и к ошибкам второго рода не приведут.</li>
<li>Ошибки в правой колонке — это слова, которые потерялись при расшифорвке. Их 30%-50%. Это, конечно, печально.</li>
</ul>
<img src="https://habrastorage.org/files/b73/c5f/45b/b73c5f45b9fd4765a41fff220f98e5ff"/>
<img src="https://habrastorage.org/files/602/555/cac/602555cac1534b3eba4481b528c64c8c"/>
<img src="https://habrastorage.org/files/745/274/adc/745274adc52447fcbe78747a67e8bd9e"/>
<img src="https://habrastorage.org/files/17d/4c5/d3f/17d4c5d3f7604f8098814040b203817a"/>
<spoiler title="mosenergo, rigla, transaero и worldclass.">
mosenergo
<img src="https://habrastorage.org/files/95e/dfd/c9d/95edfdc9d41a43d0a85c7e3a31b8f4df"/>
rigla
<img src="https://habrastorage.org/files/e55/a99/ef0/e55a99ef04004ee08e3cfd9d32acfd71"/>
transaero
<img src="https://habrastorage.org/files/08e/8de/ac9/08e8deac9b7d4e2b9485a888a1c69650"/>
worldclass
<img src="https://habrastorage.org/files/793/a70/ebe/793a70ebee0346199c04c5325c3516dd"/>
<img src="https://habrastorage.org/files/f9a/20e/edd/f9a20eedd3064950b81325fb96155387"/>
</spoiler>
Потом я расшифровал реплики, полученные автоматически. Убедился, что ошибки сильно не изменились, представил себя владельцем колл-центра и попробовал извлечь какую-то пользу:
<ol>
<li>Попробовал оценить успешность обращений по ключевым словам:
<source lang="python">show_query_results(query_transcripts(u'спасибо большое пожалуйста', transcripts, top=10))</source><img src="https://habrastorage.org/files/d15/a96/bb3/d15a96bb36c141b09db204886162183f"/>
<source lang="python">show_query_results(query_transcripts(u'не получается не могу нет', transcripts, top=5))</source><img src="https://habrastorage.org/files/52a/23f/589/52a23f58976b44a3812e4a5f0025bfd1"/>
<source lang="python">show_query_results(query_transcripts(u'заявку оформил', transcripts))</source><img src="https://habrastorage.org/files/00e/076/f98/00e076f98a7f49e6a646683afc85f8ad"/>
<source lang="python">show_query_results(query_transcripts(u'будем ждать', transcripts))</source><img src="https://habrastorage.org/files/972/b6c/c25/972b6cc254074f38847a2b63a9eaa541"/>
</li>
<li>Проверил скилы операторов по впариванию услуг:
<source lang="python">show_query_results(query_transcripts(u'у нас есть скидки', transcripts))</source><img src="https://habrastorage.org/files/e84/a90/cfe/e84a90cfed6d4884bf28bb9f7ccaf4a3"/>
<source lang="python">show_query_results(query_transcripts(u'рекомендую заключить договор на техническое обслуживание', transcripts))</source><img src="https://habrastorage.org/files/6f8/b29/973/6f8b29973bcc46899b3fff5e19c17873"/>
<source lang="python">show_query_results(query_transcripts(u'мы предлагаем замену труб и радиаторов на выгодных условиях', transcripts))</source><img src="https://habrastorage.org/files/856/ba5/ea6/856ba5ea66e14edaad665cf6037b99e3"/>
<source lang="python">show_query_results(query_transcripts(u'завтра завтрашний день', transcripts))</source><img src="https://habrastorage.org/files/ebc/3a7/959/ebc3a795961f45a78750438975717cfa"/>
<source lang="python">show_query_results(query_transcripts(u'за выезд мастера никто денег не возьмёт', transcripts))</source><img src="https://habrastorage.org/files/2ab/994/872/2ab99487265343468501b5ee5255807a"/>
<source lang="python">show_query_results(query_transcripts(u'в любое время когда вам удобно', transcripts))</source><img src="https://habrastorage.org/files/3a0/d8f/297/3a0d8f2972b446928d7c3903d4019595"/>
<source lang="python">show_query_results(query_transcripts(u'приходите поговорим о ценах акциях подберем выгодный вариант', transcripts))</source><img src="https://habrastorage.org/files/cb9/ef6/8c9/cb9ef68c985143e3a7b9bc48ebe1062c"/>
<source lang="python">show_query_results(query_transcripts(u'у нас принято встречать гостей', transcripts))</source><img src="https://habrastorage.org/files/039/240/99a/03924099ae5c4621915bcabc66d97105"/>
<source lang="python">show_query_results(query_transcripts(u'скажите вашу фамилию и телефон', transcripts))</source><img src="https://habrastorage.org/files/d1a/6ff/251/d1a6ff251eb54852b7fff52cf9b18365"/>
</li>
<li>Попробовал определить цель звонка:
<source lang="python">show_query_results(query_transcripts(u'хотел бы оформить узнать сколько стоит сколько платить подключить посмотреть посещать уточнить наличие', transcripts, top=5))</source><img src="https://habrastorage.org/files/497/12c/55d/49712c55d5e945829244eb894784d756"/>
<source lang="python">show_query_results(query_transcripts(u'горные лыжи', transcripts))</source><img src="https://habrastorage.org/files/862/25c/c44/86225cc4488845278c0d53aad32b00d7"/>
</li>
</ol>

По-моему, технология жизнеспособная и может принести некоторую пользу.
